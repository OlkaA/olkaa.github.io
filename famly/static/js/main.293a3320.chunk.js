(this.webpackJsonpfamly=this.webpackJsonpfamly||[]).push([[0],{25:function(e,t,n){e.exports=n(38)},30:function(e,t,n){},31:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(22),s=n.n(c),i=(n(30),n(31),n(11)),u=n(14),l=n(1),o=n.n(l),h=n(3),m=n(8),p=n(9),f=n(12),d=n(10),v=n(13),b="https://tryfamly.co/api/daycare/tablet/group",k="234ffdb8-0889-4be3-b096-97ab1679752c",y="11fc220c-ebba-4e55-9346-cd1eed714620",g="fb6c8114-387e-4051-8cf7-4e388a77b673";function O(){return E.apply(this,arguments)}function E(){return(E=Object(h.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(b,"?accessToken=").concat(k,"&groupId=").concat(y,"&institutionId=").concat(g));case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){return x.apply(this,arguments)}function x(){return(x=Object(h.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(b,"?accessToken=").concat(k,"&groupId=").concat(y,"&institutionId=").concat(g));case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a.children.find((function(e){return e.childId===t})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t){return N.apply(this,arguments)}function N(){return(N=Object(h.a)(o.a.mark((function e(t,n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://tryfamly.co/api/v2/children/".concat(t,"/checkins?accessToken=").concat(k,"&pickupTime=").concat(encodeURIComponent(n)),{method:"POST"});case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return S.apply(this,arguments)}function S(){return(S=Object(h.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://tryfamly.co/api/v2/children/".concat(t,"/checkout?accessToken=").concat(k),{method:"POST"});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(f.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={children:[]},n}return Object(v.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(h.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getFetchData();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getFetchData",value:function(){var e=Object(h.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:t=e.sent,n=t.children||[],this.setState({children:n});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("ul",{className:"children"},this.state.children.map((function(e){return r.a.createElement("li",{key:e.childId},r.a.createElement(i.b,{to:(e.checkedIn?"/out":"/in")+"/"+e.childId},r.a.createElement("div",null,r.a.createElement("img",{src:e.image.small,alt:e.name.fullName})),r.a.createElement("span",null,e.name.fullName),r.a.createElement("p",{className:e.checkedIn?"checked-in":"not-checked-in"},e.checkedIn?"checked in":"not checked in")))})))}}]),t}(a.Component),C=n(7),D=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(f.a)(this,Object(d.a)(t).call(this,e))).state={hour:null,minute:null},n.selectHour=n.selectHour.bind(Object(C.a)(n)),n.selectMinute=n.selectMinute.bind(Object(C.a)(n)),n}return Object(v.a)(t,e),Object(p.a)(t,[{key:"getTimeString",value:function(e,t){return(e>12?e-12:e)+("undefined"!==typeof t?":"+t:"")+(e>11?"pm":"am")}},{key:"selectHour",value:function(e){var t=this;this.setState({hour:e}),this.setState({minute:null},(function(){return t.props.getTime(t.state.hour,t.state.minute)}))}},{key:"selectMinute",value:function(e){var t=this;this.setState({minute:e},(function(){return t.props.getTime(t.state.hour,t.state.minute)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("ul",{className:"hours"},[8,9,10,11,12,13,14,15,16].map((function(t){return r.a.createElement("li",{key:t,onClick:function(){return e.selectHour(t)},className:t===e.state.hour?"selected":null},e.getTimeString(t))}))),this.state.hour?r.a.createElement("ul",{className:"minutes"},[0,15,30,45].map((function(t){return r.a.createElement("li",{key:t,onClick:function(){return e.selectMinute(t)},className:t===e.state.minute?"selected":null},e.getTimeString(e.state.hour,t))}))):"")}}]),t}(a.Component),M=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(f.a)(this,Object(d.a)(t).call(this,e))).state={child:null,time:null,success:!1},n.getTime=function(e,t){var a=e&&t?"".concat(e,":").concat(t):null;n.setState({time:a})},n.signIn=n.signIn.bind(Object(C.a)(n)),n}return Object(v.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(h.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getFetchData();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getFetchData",value:function(){var e=Object(h.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(this.props.id);case 2:t=e.sent,this.setState({child:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"signIn",value:function(){var e=Object(h.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.child||!this.state.time){e.next=7;break}return e.next=3,w(this.state.child.childId,this.state.time);case 3:(t=e.sent).error?alert(t.error):this.setState({success:!0}),e.next=8;break;case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.success?r.a.createElement(u.a,{to:"/"}):this.state.child?r.a.createElement("div",{className:"child-page"},r.a.createElement("div",null,r.a.createElement("img",{src:this.state.child.image.small,alt:this.state.child.name.fullName})),r.a.createElement("span",null,this.state.child.name.fullName),r.a.createElement("p",null,"Choose when ",this.state.child.name.firstName," will be picked up: ",this.state.time," "),r.a.createElement(D,{getTime:this.getTime}),r.a.createElement("div",{className:"footer"},r.a.createElement(i.b,{className:"close",to:"/"},"Close"),r.a.createElement("a",{className:"sign-in",onClick:this.signIn,disabled:!this.state.time},"Sign in"))):""}}]),t}(a.Component),F=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(f.a)(this,Object(d.a)(t).call(this,e))).state={child:null,success:!1},n.signOut=n.signOut.bind(Object(C.a)(n)),n}return Object(v.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(h.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getFetchData();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getFetchData",value:function(){var e=Object(h.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(this.props.id);case 2:t=e.sent,this.setState({child:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Object(h.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("null"===this.state.child){e.next=5;break}return e.next=3,I(this.state.child.childId);case 3:(t=e.sent).error?alert(t.error):this.setState({success:!0});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.success?r.a.createElement(u.a,{to:"/"}):this.state.child?r.a.createElement("div",{className:"child-page"},r.a.createElement("div",null,r.a.createElement("img",{src:this.state.child.image.small,alt:this.state.child.name.fullName})),r.a.createElement("span",null,this.state.child.name.fullName),r.a.createElement("div",{className:"footer"},r.a.createElement(i.b,{className:"close",to:"/"},"Close"),r.a.createElement("a",{className:"sign-out",onClick:this.signOut},"Sign out"))):""}}]),t}(a.Component);var H=function(){return r.a.createElement("div",{className:"wrapper"},r.a.createElement(i.a,{basename:"/famly"},r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/"},r.a.createElement(T,null)),r.a.createElement(u.b,{exact:!0,path:"/in/:id",render:function(e){var t=e.match;return r.a.createElement(M,{id:t.params.id})}}),r.a.createElement(u.b,{exact:!0,path:"/out/:id",render:function(e){var t=e.match;return r.a.createElement(F,{id:t.params.id})}}))))};s.a.render(r.a.createElement(H,null),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.293a3320.chunk.js.map